<!doctype html>

<html>

	<head>
		<title>SCOREBOARD</title>
		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"></link>
		
		<script language="javascript" type="text/javascript">
			function getData1(){
							   var xmlhttp;
							   if (window.XMLHttpRequest) {
								   xmlhttp = new XMLHttpRequest();               
							   }           
							   
							   xmlhttp.onreadystatechange = function () {  
								   if (this.readyState == 4) { 
										var lines = this.responseText; 
										var lineArr = lines.split('\n');
										document.getElementById("red").innerHTML = lineArr[0];
								   }               
							   }
								xmlhttp.open("GET", "red.txt", true);
							   xmlhttp.send();   
								}
								
		function getData2(){
							   var xmlhttp2;
							   if (window.XMLHttpRequest) {
								   xmlhttp2 = new XMLHttpRequest();               
							   }           
							   xmlhttp2.onreadystatechange = function () {               
								   if (this.readyState == 4) {                   
									 var lines = this.responseText; 

										var lineArr = lines.split('\n');
										document.getElementById("blue").innerHTML = lineArr[0];     
											
								   }               
							   }
								xmlhttp2.open("GET", "blue.txt", true);
							   xmlhttp2.send();   
								}
			
		  var y = setInterval(function(){
					getData1();
					getData2();
			},50);
			

			var red=0;
			var blue=0;
			var pos =0;
			var time = 360;
			var pause =1;
			var setup=300;
			var stoptime=0;
			var defaulttime =1;
			//this function is for updating scoring according to text file.
			function loadFile(filePath) {
										  var result = null;
										  var xmlhttp = new XMLHttpRequest();
										  xmlhttp.open("GET", filePath, false);
										  xmlhttp.send();
										  if (xmlhttp.status==200) {
											result = xmlhttp.responseText;
										  }
										  return result;
										}
			function select1()//this function is for input of name of teams.
			{
				
				var e = document.getElementById("selectr");
				var strUser = e.options[e.selectedIndex].text;
				document.getElementById("s1").innerHTML=strUser;
				
				var e = document.getElementById("selectb");
				var strUser = e.options[e.selectedIndex].text;
				document.getElementById("s2").innerHTML=strUser;
				document.getElementById("s3").innerHTML=" ";
			}
			
			function inpu() //this function is use to set time
			{
				var x = parseInt(document.getElementById("inp").value, 10);
				time=x;
				setup = 0;
				pause =1;
				document.getElementById('time').innerHTML="00:00"
				var time1 = time-setup;
				var temp1 = Math.floor(time/60);
				var temp2 = Math.floor(time%60);
				if(temp2<10)
					document.getElementById('time').innerHTML=temp1 + " : 0" + temp2;
				else{
					document.getElementById('time').innerHTML=temp1 + " : " + temp2;
					}
			}
			
			
			function update()//this function is called when any key is pressed.
			{
					var temp = event.keyCode;
					
					if(temp == 83)//when "S" is pressed. Set the time.
					{
						pause=1;
						document.getElementById('time').innerHTML="<span style='font-size:20px;color:black;'><input  id='inp' width=50px height=30px /><button onclick='inpu()'>Submit</button></span>";
						defaulttime=0;
					}
					
					//play pause
					if(temp==80)
					{
						var audio = new Audio('s1.mp3');audio.play();
						if(pause==0){pause=1;}
							else {pause=0;}
					}
					
			}
			//this function is for clock
			var x = setInterval(function() {	
												if(pause==0)
												{
												time--;
												var time1 = time-setup;
												var temp1 = Math.floor(time1/60);
												var temp2 = Math.floor(time1%60);
												if(temp2<10)
												document.getElementById('time').innerHTML=temp1 + " : 0" + temp2;
												else{
														document.getElementById('time').innerHTML=temp1 + " : " + temp2;
													}
												if(time==300&&defaulttime==1){pause=1; setup=0; document.getElementById('time').innerHTML="5:00";var audio = new Audio('s1.mp3');audio.play();}
												if(time==0){pause=1; setup=0; document.getElementById('time').innerHTML="00:00";var audio = new Audio('s1.mp3');audio.play();}
												}
												
												
											},996);
			
		</script>
	</head>
	
	<body onkeydown="update()">
		
		<div class="container-fluid">
			<div class="row" style="background-color:#666666;">
				<div class = "col-xs-2"><img src="robo.png" ></div>
				<div class="col-xs-8" ><p align="center" style="font-family:times new roman;font-size:80px;color:white;">IOE ROBOCON 2018</p></div>
				<div class = "col-xs-2"><img src="tu.png"></div>
			</div>
			<div class="row" style="background-color:green;">
				<div class="col-xs-4" style="text-align:center;background-color:green;"><br /><p style="font-size:60px;color:white;" id ="timer"></p></div>
				<div class="col-xs-4" style="text-align:center;background-color:green;"><p style="font-size:120px;color:white;" id ="time">1:00</p></div>
				<div class="col-xs-4" style="text-align:center;background-color:green;"><br /><p style="font-size:60px;color:white;" id ="timeb"></p></div>
			</div>
			<div class="row">
				<div class="col-xs-5"><p style="text-align:center;color:red;font-size:40px;" id ="s1"><span style="text-align:center;color:red;font-size:20px;">
																							<select id="selectr">
																							 <option value = "1">Khwopa Engineering college</option>
																							 <option value = "2">Everest Engineering and Management college</option>
																							 <option value = "3">Sagarmatha Engineering College</option>
																							 <option value = "4">Kathmandu Engineering college</option>
																							 <option value = "5">Kantipur Engineering College</option>
																							 <option value = "6">Advanced College of Engineering and Management</option>
																							 <option value = "7">Eastern Region Campus</option>
																							 <option value = "8">Western Region Campus</option>
																							 <option value = "9">Thapathali Campus</option>
																							</select></span>
										</p></div>
				<div class="col-xs-2" id ="s3"><br /><br /><input type="button" value="submit" onclick="select1()" /></div>
				<div class="col-xs-5"><p style="text-align:center;color:blue;font-size:40px;" id="s2"><span style="text-align:center;color:blue;font-size:20px;">
																							<select id="selectb">
																							  <option value = "1">Khwopa Engineering college</option>
																							 <option value = "2">Everest Engineering and Management college</option>
																							 <option value = "3">Sagarmatha Engineering College</option>
																							 <option value = "4">Kathmandu Engineering college</option>
																							 <option value = "5">Kantipur Engineering College</option>
																							 <option value = "6">Advanced College of Engineering and Management</option>
																							 <option value = "7">Eastern Region Campus</option>
																							 <option value = "8">Western Region Campus</option>
																							 <option value = "9">Thapathali Campus</option>
																							</select></span></p></div>
			</div>
			<div class="row">
				<div class="col-xs-5"><p style="font-family:times new roman; font-size:180px;text-align:center;color:red" id="red">0</p></div>
				<div class="col-xs-2"><p style="font-size:80px; text-align:center;"><br />Vs</p></div>
				<div class="col-xs-5"><p style="font-family:times new roman; font-size:180px;text-align:center;color:blue;" id ="blue">0</p></div>
			</div>
		</div>
		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>
	</body>

</html>